<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout/base :: head"></head>
<body>
  <div th:replace="layout/base :: content" th:with="contentFragment=${{content: 'content'}}">
    <div th:fragment="content">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Danh sách sản phẩm</h2>
      </div>

      <div class="row">
        <div class="col-md-3">
          <div class="list-group">
            <a th:each="c : ${categories}" class="list-group-item list-group-item-action"
               th:href="@{/products(categoryId=${c.id})}" th:text="${c.name}">Category</a>
          </div>
        </div>

        <div class="col-md-9">
          <div class="row">
            <div class="col-md-4 mb-3" th:each="p : ${products}">
              <div class="card h-100">
                <img th:src="@{/images/default-product.jpg}" class="card-img-top" alt="..."/>
                <div class="card-body d-flex flex-column">
                  <h5 class="card-title" th:text="${p.name}">Product</h5>
                  <p class="card-text text-muted" th:text="${p.category.name}">Category</p>
                  <p class="card-text fw-bold" th:text="${#numbers.formatDecimal(p.price,1,2)}">0.00</p>
                  <div class="mt-auto">
                    <a th:href="@{/products/detail/{id}(id=${p.id})}" class="btn btn-sm btn-outline-primary">Chi tiết</a>
                    <form th:action="@{/cart/add}" method="post" class="d-inline">
                      <input type="hidden" name="productId" th:value="${p.id}"/>
                      <input type="hidden" name="quantity" value="1"/>
                      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                      <button class="btn btn-sm btn-primary" type="submit">Thêm giỏ</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div> <!-- row -->
    </div>
  </div>
</body>
</html>