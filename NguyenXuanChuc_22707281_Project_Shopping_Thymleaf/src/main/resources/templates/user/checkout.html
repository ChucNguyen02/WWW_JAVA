<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout}">

<head>
  <title>Thanh toán</title>
</head>

<body>
<div layout:fragment="content">
  <h1 class="mb-4 text-center">Xác nhận thanh toán</h1>

  <div th:if="${cartTotal == 0}">
    <div class="alert alert-warning">Giỏ hàng trống. Không thể thanh toán.</div>
  </div>

  <div class="row g-5" th:unless="${cartTotal == 0}">
    <div class="col-md-7 col-lg-8">
      <h4 class="mb-3">Thông tin giao hàng</h4>
      <form th:action="@{/user/checkout}" method="post">
        <div class="row g-3">
          <div class="col-12">
            <label for="fullName" class="form-label">Họ và tên</label>
            <input type="text" class="form-control" id="fullName"
                   th:value="${customer.name}" readonly disabled>
          </div>

          <div class="col-12">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="email"
                   th:value="${customer.email}" readonly disabled>
          </div>

          <div class="col-12">
            <label for="phone" class="form-label">Số điện thoại</label>
            <input type="text" class="form-control" id="phone"
                   th:value="${customer.phone}" readonly disabled>
          </div>

          <div class="col-12">
            <label for="shippingAddress" class="form-label">Địa chỉ giao hàng</label>
            <textarea class="form-control" id="shippingAddress" name="shippingAddress" rows="3"
                      th:text="${customer.address}" required></textarea>
            <small class="text-muted">Bạn có thể thay đổi địa chỉ giao hàng nếu muốn.</small>
          </div>
        </div>

        <hr class="my-4">

        <h4 class="mb-3">Phương thức thanh toán</h4>
        <div class="my-3">
          <div class="form-check">
            <input id="cod" name="paymentMethod" type="radio" class="form-check-input"
                   value="COD" checked required>
            <label class="form-check-label" for="cod">Thanh toán khi nhận hàng (COD)</label>
          </div>
          <div class="form-check">
            <input id="vnpay" name="paymentMethod" type="radio" class="form-check-input"
                   value="VNPAY" disabled>
            <label class="form-check-label" for="vnpay">Thanh toán qua VNPAY (Chưa hỗ trợ)</label>
          </div>
        </div>

        <hr class="my-4">

        <button class="w-100 btn btn-primary btn-lg" type="submit">
          Xác nhận đặt hàng
        </button>
      </form>
    </div>

    <div class="col-md-5 col-lg-4 order-md-last">
      <h4 class="d-flex justify-content-between align-items-center mb-3">
        <span class="text-primary">Đơn hàng của bạn</span>
      </h4>
      <ul class="list-group mb-3">
        <li class="list-group-item d-flex justify-content-between lh-sm">
          <div>
            <h6 class="my-0">Tổng tiền giỏ hàng</h6>
          </div>
          <span class="text-muted" th:text="${#numbers.formatDecimal(cartTotal, 0, 'COMMA', 0, 'POINT') + ' VNĐ'}"></span>
        </li>
        <li class="list-group-item d-flex justify-content-between lh-sm">
          <div>
            <h6 class="my-0">Phí vận chuyển</h6>
          </div>
          <span class="text-muted">Miễn phí</span>
        </li>
        <li class="list-group-item d-flex justify-content-between bg-light">
          <span class="fw-bold fs-5">Tổng thanh toán</span>
          <strong class="fs-5 text-danger" th:text="${#numbers.formatDecimal(cartTotal, 0, 'COMMA', 0, 'POINT') + ' VNĐ'}"></strong>
        </li>
      </ul>
      <div class="text-center">
        <a th:href="@{/cart}">&larr; Quay lại giỏ hàng</a>
      </div>
    </div>
  </div>
</div>
</body>
</html>